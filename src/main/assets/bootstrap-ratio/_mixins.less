#ratio {
  .base() {
    position: relative;

    &::before {
      display: block;
      content: "";
      width: 100%;
      visibility: hidden;
    }

    & > *:first-child {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
    }
  }

  .ratio(@width, @height) {
    &::before {
      padding-top: percentage(@height / @width);
    }
  }

  .base-attr(@attr) {
    &[@{attr}] {
      .base();
    }
  }

  .ratio-attr(@attr, @width, @height) {
    &[@{attr}="@{width}:@{height}"] {
      .ratio(@width, @height);
    }
  }
}

// Backcompat
// --------------------------------------------------
.ratio-base() {
  #ratio > .base();
}
.ratio(@width, @height) {
  #ratio > .ratio(@width, @height);
}
.ratio-attr-base(@attr) {
  #ratio > .ratiobase-attr(@attr);
}
.ratio-attr(@attr, @width, @height) {
  #ratio > .ratio-attr(@attr, @width, @height);
}
